(function($){$.fn.labelvis=function(options){var defaults={infieldClass:'labelHighlight',slidingClass:'labelSlide',speed:300};options=$.extend(defaults,options);return this.each(function(){var labelText=$("label[for="+this.id+"]").text();if(!(this instanceof HTMLTextAreaElement))labelText=labelText.replace(/\n/g,'');$(this).data("labelvis",labelText);var clearInput=function(elem){if($(elem).hasClass(options.infieldClass)){elem.value="";$(elem).removeClass(options.infieldClass)}};var showLabel=function(elem){if(elem.value==""){elem.value=$(elem).data("labelvis");$(elem).addClass(options.infieldClass)}};var slideLabelIn=function(elem){var div=$('<div class="'+options.slidingClass+'">'+$(elem).data("labelvis")+'</div>').addClass(options.slidingClass).css('position','absolute').css('display','none').insertBefore(elem);div.css('top',$(elem).offset().top-div.outerHeight()).show("slide",{direction:"down"},options.speed)};var slideLabelOut=function(elem){$(elem).prev('.'+options.slidingClass).remove()};var element=this;$(element).focus(function(){clearInput(element);slideLabelIn(element)}).blur(function(){showLabel(element);slideLabelOut(element)});$(window).unload(function(){clearInput(element)});$(this).parents("form").submit(function(){$(this).find('.'+options.infieldClass).each(function(){clearInput(this)})});if(this.value===this.defaultValue){showLabel(this)}})}})(jQuery);
