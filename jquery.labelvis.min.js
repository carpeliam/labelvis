(function($){$.fn.labelvis=function(options){var defaults={infieldClass:'labelHighlight',slidingClass:'labelSlide',speed:300};options=$.extend(defaults,options);return this.each(function(){var labelText=$("label[for="+this.id+"]").text();if(!(this instanceof HTMLTextAreaElement))labelText=labelText.replace(/\n/g,'');$(this).data("labelvis",labelText);var clearInput=function(elem){if($(elem).hasClass(options.infieldClass)){elem.value="";$(elem).removeClass(options.infieldClass)}};var showLabel=function(elem){if(elem.value==""){elem.value=$(elem).data("labelvis");$(elem).addClass(options.infieldClass)}};var slideLabelIn=function(elem){var div=$('<div>'+$(elem).data("labelvis")+'</div>').addClass(options.slidingClass).css('position','absolute').appendTo($(elem).parents('form'));div.css('top',$(elem).position().top-div.outerHeight()).css('left',$(elem).position().left).show("slide",{direction:"down"},options.speed)};var slideLabelOut=function(elem){$(elem).parents('form').children('div.'+options.slidingClass+':contains('+$(elem).data("labelvis")+')').remove()};var element=this;$(element).focus(function(){clearInput(element);slideLabelIn(element)}).blur(function(){showLabel(element);slideLabelOut(element)});$(window).unload(function(){clearInput(element)});$(this).parents("form").submit(function(){$(this).find('.'+options.infieldClass).each(function(){clearInput(this)})});if(this.value===this.defaultValue){showLabel(this)}})}})(jQuery);
